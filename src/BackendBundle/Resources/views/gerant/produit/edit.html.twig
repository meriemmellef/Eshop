{% extends '@Backend/layout/layout.html.twig' %}


{% block page %}
    <style>
        input[type='radio'] {
            -webkit-appearance:none;
            width:20px;
            height:20px;
            border:1px solid #e2e2e2;
            border-radius:50%;
            outline:none;
            box-shadow:0 0 1px 0 #e2e2e2 inset;
        }

        input[type='radio']:hover {
            box-shadow:0 0 1px 0 #e2e2e2 inset;
        }

        input[type='radio']:before {
            content:'';
            display:block;
            width:50%;
            height:50%;
            margin: 20% auto;
            border-radius:50%;
        }
        input[type='radio']:checked:before {
            background: #dd1d36;
        }
        li {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }


    </style>
    <div class="page">
        <div class="page-header">
            <h1 class="page-title">{{ "Modification Produit"|trans }}</h1>

            {% if errorc is defined %}
                <div class="col-lg-12 text-center">
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        {{ errorc|trans }}
                    </div>
                </div>
            {% endif %}

            {% if errort is defined %}
                <div class="col-lg-12 text-center">
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        {{ errort|trans }}
                    </div>
                </div>
            {% endif %}

            {% if errorp is defined %}
                <div class="col-lg-12 text-center">
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        {{ errorp|trans }}
                    </div>
                </div>
            {% endif %}

            {% if errorqu is defined %}
                <div class="col-lg-12 text-center">
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        {{ errorqu|trans }}
                    </div>
                </div>
            {% endif %}

            {% if errorquantmax is defined %}
                <div class="col-lg-12 text-center">
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                        {{ errorquantmax|trans }}
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="page-content">
            <!-- Panel -->
            <div class="panel">
                <div class="panel-body container-fluid">
                    <div class="row row-lg">
                        <div class="col-lg-12">
                            <div class="example-wrap">
                                <div class="row row-lg">


                                    {{ form_start(form, {'attr': {'class': 'col-lg-12 '}}) }}
                                    <input type="hidden" name="referer" value="{{app.request.headers.get('referer')}}"/>

                                    {% if  catproduit is defined%}
                                        <div class="col-lg-12">
                                            <div class="row row-lg">
                                                <div class="col-lg-2 text-left">

                                                </div>
                                                <div class="col-lg-2 text-left">
                                                    <label>{{"Catégorie"|trans}}<span style="color: #ED0000">*</span> :</label>
                                                </div>
                                                <div class="col-lg-6 text-left">
                                                    {% if pays.frontLanguage  == 'fr' or pays.frontLanguage  == 'FR' %}
                                                        {% if catproduit.nom %}
                                                            <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                                <label>{{ catproduit.nom }}</label>

                                                            </div>
                                                        {% endif %}
                                                    {% else %}
                                                        {% if catproduit.nomEn %}
                                                            <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                                <label>{{  catproduit.nomEn }}</label>

                                                            </div>
                                                        {% endif %}
                                                    {% endif %}                                                </div>
                                            </div>
                                        </div>

                                        <br><br>
                                    {% endif %}
                                    {% if  subproduit is defined%}
                                        <div class="col-lg-12">
                                            <div class="row row-lg">
                                                <div class="col-lg-2 text-left">

                                                </div>
                                                <div class="col-lg-2 text-left">
                                                    <label>{{"Sous Catégorie"|trans}} <span style="color: #ED0000">*</span> :</label>
                                                </div>
                                                <div class="col-lg-6 text-left">
                                                    {% if pays.frontLanguage  == 'fr' or pays.frontLanguage  == 'FR' %}
                                                        {% if subproduit.nom %}
                                                            <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                                <label>{{ subproduit.nom }}</label>

                                                            </div>
                                                        {% endif %}
                                                    {% else %}
                                                        {% if subproduit.nomEn %}
                                                            <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                                <label>{{  subproduit.nomEn }}</label>

                                                            </div>
                                                        {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        <br><br>
                                    {% endif %}
                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{ "Nom"|trans }}<span style="color: #ED0000">*</span> :</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {% if pays.frontLanguage  == 'fr' or pays.frontLanguage  == 'FR' %}
                                                    {% if produit.nom %}
                                                        <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                            <label>{{ produit.nom }}</label>

                                                        </div>
                                                    {% endif %}
                                                {% else %}
                                                    {% if produit.nomen %}
                                                        <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                            <label>{{ produit.nomen }}</label>

                                                        </div>
                                                    {% endif %}
                                                {% endif %}

                                            </div>
                                        </div>
                                    </div>

                                    <br><br>

                                    <div class="col-lg-12" >
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{ "Description"|trans }} :</label>
                                            </div>
                                            <div class="col-lg-6 text-left" >

                                                {% if  pays.frontLanguage  == 'fr' or pays.frontLanguage  == 'FR' %}
                                                    {% if produit.description %}
                                                        <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                            <label>{{ produit.description }}</label>

                                                        </div>
                                                    {% endif %}
                                                {% else %}
                                                    {% if produit.descriptionen %}
                                                        <div style="padding: 20px;border: 1px solid #d7d7d7">
                                                            <label>{{ produit.descriptionen }}</label>

                                                        </div>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <br><br>

                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{ "Prix"|trans }} <span style="color: #ED0000">*</span> :</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {{ form_widget(form.prix, {'attr': {'class': 'form-control'}}) }}
                                                <br>
                                                {% if not form.vars.valid %}
                                                    {% for child in form.children %}
                                                        {# Display the errors of the form item #}
                                                        {%for error in child.vars.errors%}
                                                            <div class="alert alert-danger alert-dismissible" role="alert">
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">×</span>
                                                                </button>
                                                                {{"le prix n'est pas valide"|trans}}
                                                            </div>
                                                        {%endfor%}
                                                    {%endfor%}

                                                {%endif%}
                                            </div>
                                        </div>
                                    </div>
                                    <br><br>



                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                            </div>

                                            <div class="col-lg-6 text-left">
                                                <div class="checkbox-custom checkbox-primary center-block">
                                                    {{ form_widget(form.is_promo, {'attr': {'class': 'form-control'}}) }}
                                                    <label for="inputChecked">{{ "Est Promo"|trans }}?</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-12" id="div_prix_promo">
                                        <br><br>
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-xxl-8 col-lg-8">
                                                <!-- Example Tabs In The Panel -->
                                                <div class="panel nav-tabs-horizontal" data-plugin="tabs">
                                                    <ul class="nav nav-tabs nav-tabs-line" role="tablist">
                                                        <li class="nav-item" id="titleeeone">
                                                            <input type="radio" id="radPromotionP" name="drone" value="12" >

                                                            <a class="nav-link active" id="promo_prix"  style="padding: 7px 10px 7px 0px;" data-toggle="tab" href="#promoparprix" aria-controls="exampleTopHome" role="tab" aria-selected="true">
                                                                {{"Promotion par prix"|trans }}
                                                            </a>
                                                        </li>
                                                        <li class="nav-item" style="" id="titleee">
                                                            <input type="radio" id="radPromotionPor" name="drone" value="13"  >

                                                            <a class="nav-link" id="promo_pourcentage" style="padding: 7px 10px 7px 0px;" data-toggle="tab" href="#promoparpourcentage" aria-controls="exampleTopComponents" role="tab" aria-selected="false">
                                                                {{"Promotion en pourcentage"|trans }}
                                                            </a>
                                                        </li>
                                                    </ul>
                                                    <div class="panel-body" style="border: 1px solid #d4d4d4;">
                                                        <div class="tab-content">
                                                            <div class="tab-pane active" id="promoparprix" role="tabpanel">

                                                                <div class="row row-lg">
                                                                    <div class="col-lg-3 text-left" style="padding-right: 0px;padding-left: 4px;">
                                                                        <label>{{ "Prix en promotion"|trans }} :</label>
                                                                    </div>
                                                                    <div class="col-lg-9 text-left">
                                                                        {{ form_widget(form.prix_promo, {'attr': {'class': 'form-control'}}) }}


                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="tab-pane" id="promoparpourcentage" role="tabpanel">
                                                                <div class="col-lg-12">
                                                                    <div class="row row-lg">
                                                                        <div class="col-lg-3 text-left" style="padding-right: 0px;padding-left: 4px;">
                                                                            <label>{{ "Pourcentage de promotion"|trans }}:</label>
                                                                        </div>
                                                                        <div class="col-lg-9 text-left">
                                                                            {{ form_widget(form.poucentage_promo, {'attr': {'class': 'form-control'}}) }}
                                                                            <br>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <br><br>
                                                                <div class="col-lg-12">
                                                                    <div class="row row-lg">
                                                                        <div class="col-lg-3 text-left" style="padding-right: 0px;padding-left: 4px;">
                                                                            <label>{{"Numéro de produit à reduire"|trans}}:</label>
                                                                        </div>
                                                                        <div class="col-lg-9 text-left">
                                                                            {{ form_widget(form.num_produit_promo, {'attr': {'class': 'form-control'}}) }}
                                                                            <br>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Example Tabs In The Panel -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{"Quantité"|trans}} <span style="color: #ED0000">*</span>:</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {{ form_widget(form.quantite, {'attr': {'class': 'form-control'}}) }}
                                            </div>
                                        </div>
                                    </div>
                                    <br><br>
                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{ "Maximum de produits par commande"|trans }} <span style="color: #ED0000">*</span> :</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {{ form_widget(form.maxcommande, {'attr': {'class': 'form-control'}}) }}
                                            </div>
                                        </div>
                                    </div>
                                    <br><br>
                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">

                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{ "Image"|trans }} <span style="color: #ED0000">*</span> :</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {% if produit.image %}
                                                    <div style="padding-top: 20px;">
                                                        <img class="" style="height: 50px;width: auto;  margin-left: auto;  margin-right: auto;  display: block;"
                                                             src="{{ asset('uploads/produits/') }}{{ produit.image }}">

                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>


{#

                                    <br><br>
                                    <div class="col-lg-12">
                                        <div class="row row-lg">
                                            <div class="col-lg-2 text-left">
                                            </div>
                                            <div class="col-lg-2 text-left">
                                                <label>{{"Fichetechnique"|trans}}:</label>
                                            </div>
                                            <div class="col-lg-6 text-left">
                                                {% if produit.file %}<a target="_blank" href="{{ legal_notice_directory }}/{{ produit.file }}">{{ produit.file }}</a>{% endif %}

                                            </div>
                                        </div>
                                    </div>

#}



                                    <br><br>

                                    <div class="col-lg-12" id="divcouleur" >

                                        <!-- list couleurs > 0 -->
                                        {% if list_couleur|length > 0 %}
                                            {%  set i= 0 %}

                                            <!--elements  dans list couleurs  -->
                                            {% for color in list_couleur %}
                                                <input type="text" class="form-control" id="couleur" value="{{ list_couleur|length -1 }}" hidden>
                                                {% if i == 0 %}
                                                    <div class="row row-lg" >
                                                        <div class="col-lg-2 text-left">

                                                        </div>
                                                        <div class="col-lg-2 text-left">
                                                            <label>{{ "Couleurs"|trans }}  :</label>
                                                        </div>
                                                        <div class="col-lg-6 text-right" style="border: 1px solid #dcdcdc;padding: 15px 15px 15px 15px;">
                                                            <!--couleur -->
                                                            <div class="row row-lg" id="rowcouleur">
                                                                <div class="col-lg-4 text-left">
                                                                    <input type="color" class="form-control" name="couleurs[]" value="{{ color.codeCouleur }}" readonly  style="pointer-events: none;">
                                                                    <input type="text" class="form-control" name="couleur0" value="0" hidden>
                                                                </div>
                                                                <div class="col-lg-8 text-left">
                                                                    <span class="input-group-btn" hidden>
                                                                         <div class="input-group input-group-file" data-plugin="inputGroupFile">
                                                                             <input type="text" class="form-control" readonly="">
                                                                             <span class="input-group-btn">
                                                                                 <span class="btn btn-default btn-file waves-effect waves-classic">
                                                                                     <i class="icon md-upload" aria-hidden="true"></i>
                                                                                     <input type="file"  accept="image/*"  name="images[]" >
                                                                                 </span>
                                                                             </span>
                                                                         </div>
                                                                    </span>
                                                                    {% if color.image and color.image != "" %}
                                                                        <img name='img' id='{{ color.image }}' style="width: 81%;background-size: cover;border-width: 2px; border-color: #dcdbdb;border-style: solid;"
                                                                             src="/uploads/produits/{{ color.image }}"  alt="img">
                                                                    {% endif %}
                                                                </div>

                                                            </div>

                                                            <!--size -->
                                                            <div class="row row-lg" id="rowsize0" style="padding-top: 10px">
                                                                {% if color.sizes|length > 0 %}
                                                                    {% for size in color.sizes %}
                                                                        <div class="col-lg-12 " style="padding-top: 10px">
                                                                            <div class="row row-lg">
                                                                                <div class="col-lg-4 text-right">
                                                                                    <span class="input-group-btn">
                                                                                        <input type="text" class="form-control text-center"  value="{{ size.libelle }}" readonly>
                                                                                    </span>
                                                                                </div>
                                                                                <div class="col-lg-8 text-left">
                                                                                    <div class="input-group input-group-btn">
                                                                                        <input type="number" min="0" class="form-control"  value="{{ size.quantite }}" id="quantityofsize{{ size.id }}" name="quantityofsize{{ size.id }}">
                                                                                        <button  type="button" style="margin-right: 5px;border-top-left-radius: 0;border-bottom-left-radius: 0;" onclick="updatequantityofsize({{ size.id }})"
                                                                                                 class="btn btn-default waves-effect waves-classic">
                                                                                            <i class="icon md-edit" ></i>
                                                                                        </button>
                                                                                        <a  style="background-color: #ed0000;border-color: #ed0000;" href="{{ path('delete_size_gerant',{'id':size.id,'idproduit':produit.id , 'page': page}) }}" class="btn btn-primary waves-effect waves-classic">
                                                                                            <i class="icon md-delete" style="" ></i>
                                                                                        </a>
                                                                                    </div>
                                                                                </div>


                                                                            </div>
                                                                        </div>


                                                                    {% endfor %}
                                                                {% endif %}
                                                                <div class="col-lg-12 "  style="padding-top: 10px">
                                                                    <div class="row row-lg">

                                                                        <div class="col-lg-4 text-right">
                                                                            <input type="text" class="form-control" name="sizes0[]" placeholder="size">

                                                                            <!-- <select class="form-control" style="text-align-last: center" name="sizes0[]">
                                                                                {% for key,size in produit.sizeValue %}
                                                                                    <option value="{{ key }}" >{{ size }}</option>
                                                                                {% endfor %}
                                                                            </select>-->
                                                                        </div>
                                                                        <div class="col-lg-8 text-left">
                                                                            <span class="input-group-btn">
                                                                                <input type="number" min="0" class="form-control" name="quantity0[]" value="0">
                                                                                <button type="button" onclick="adddivsize(0)" style="border-top-left-radius: 0;border-bottom-left-radius: 0;"
                                                                                        class="btn social-evernote waves-effect waves-classic">
                                                                                    <i class="icon md-plus"></i>
                                                                                </button>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <a style="background-color:#ed0000;border-color:#ed0000;margin-top:15px" href="{{ path('delete_couleur_gerant',{'idcouleur':color.id,'idproduit':produit.id,'page': page}) }}" class="btn btn-primary waves-effect waves-classic">
                                                                <i style="" class="icon md-delete" ></i> {{ "Supprimer la couleur"|trans }}
                                                            </a>
                                                        </div>
                                                        <div class="col-lg-2 text-left">
                                                            <span class="input-group-btn">
                                                                <input type="text" class="form-control" id="couleur" value="0" hidden>
                                                            </span>
                                                        </div>
                                                    </div>

                                             {% else %}
                                                    <div class="row row-lg"  style="padding-top: 10px">
                                                        <div class="col-lg-2 text-left">

                                                        </div>
                                                        <div class="col-lg-2 text-left">
                                                        </div>
                                                        <div class="col-lg-6 text-right" style="border: 1px solid #dcdcdc;padding: 15px 15px 15px 15px;">
                                                            <div class="row row-lg" id="rowcouleur" style="padding-top: 10px">

                                                                <div class="col-lg-4 text-left">
                                                                    <input type="color" class="form-control" name="couleurs[]" value="{{ color.codeCouleur }}" readonly style="pointer-events: none;">

                                                                </div>
                                                                <div class="col-lg-8 text-left">
                                                                    <span class="input-group-btn" hidden>
                                                                        <div class="input-group input-group-file" data-plugin="inputGroupFile">
                                                                        <input type="text" class="form-control" readonly="">
                                                                        <span class="input-group-btn">
                                                                            <span class="btn btn-default btn-file waves-effect waves-classic">
                                                                                <i class="icon md-upload" aria-hidden="true"></i>
                                                                                <input type="file"  accept="image/*"  name="images[]" >
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    </span>
                                                                    {% if color.image and color.image != "" %}

                                                                        <img name='img' id='{{ color.image }}' style="    width:  81%;background-size: cover;border-width: 2px; border-color: #dcdbdb;border-style: solid;"
                                                                             src="/uploads/produits/{{ color.image }}"  alt="img">

                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            <div class="row row-lg" id="rowsize{{ i }}" style="padding-top: 10px">
                                                                {% if color.sizes|length > 0 %}
                                                                    {% for size in color.sizes %}
                                                                        <div class="col-lg-12 " style="padding-top: 10px">
                                                                            <div class="row row-lg">
                                                                                <div class="col-lg-4 text-right">
                                                                                    <span class="input-group-btn">
                                                                                        <input type="text" class="form-control text-center"  value="{{ size.libelle }}" readonly>
                                                                                    </span>
                                                                                </div>
                                                                                <div class="col-lg-8 text-left">
                                                                                    <div class="input-group input-group-btn">
                                                                                        <input type="number" min="0" class="form-control"  value="{{ size.quantite }}" id="quantityofsize{{ size.id }}" name="quantityofsize{{ size.id }}">
                                                                                        <button type="button" style="margin-right: 5px;border-top-left-radius: 0;border-bottom-left-radius: 0;" onclick="updatequantityofsize({{ size.id }})"
                                                                                                class="btn btn-default waves-effect waves-classic">
                                                                                            <i class="icon md-edit" ></i>
                                                                                        </button>
                                                                                        <a  style="background-color: #ed0000;border-color: #ed0000;" href="{{ path('delete_size_gerant',{'id':size.id,'idproduit':produit.id,'page':page}) }}" class="btn btn-primary waves-effect waves-classic">
                                                                                            <i class="icon md-delete" ></i>
                                                                                        </a>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    {% endfor %}
                                                                {% endif %}
                                                                <div class="col-lg-12"  style="padding-top: 10px">
                                                                    <div class="row row-lg">
                                                                        <div class="col-lg-4 text-right">
                                                                            <input type="text" class="form-control" name="sizes{{ i }}[]" placeholder="size">

                                                                            <!--   <select class="form-control" style="text-align-last: center" name="sizes{{ i }}[]">
                                                                                   {% for key,size in produit.sizeValue %}
                                                                                       <option value="{{ key }}" >{{ size }}</option>
                                                                                   {% endfor %}
                                                                               </select> -->
                                                                        </div>
                                                                        <div class="col-lg-8 text-left">
                                                                            <span class="input-group-btn">
                                                                                <input type="number" min="0" class="form-control" name="quantity{{ i }}[]" value="0">
                                                                                <button type="button" onclick="adddivsize({{ i }})" class="btn social-evernote waves-effect waves-classic"
                                                                                        style="border-top-left-radius: 0;border-bottom-left-radius: 0;">
                                                                                    <i class="icon md-plus"></i>
                                                                                </button>
                                                                            </span>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <a style="background-color:#ed0000 ;border-color:#ed0000;margin-top: 15px;" href="{{ path('delete_couleur_gerant',{'idcouleur':color.id,'idproduit':produit.id,'page':page}) }}" class="btn btn-primary waves-effect waves-classic">
                                                                <i class="icon md-delete" ></i>{{ "Supprimer la couleur"|trans }}
                                                            </a>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% set i = i + 1 %}
                                            {% endfor %}
                                            <!-- list couleurs = 0 -->

                                        {% else %}
                                            {%  set i= 0 %}

                                            <div class="row row-lg" >
                                                <div class="col-lg-2 text-left">

                                                </div>
                                                <div class="col-lg-2 text-left">
                                                    <label>{{ "Couleurs"|trans }}  :</label>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="col-lg-12">
                                    <div class="row row-lg">
                                        <div class="col-lg-4">
                                        </div>
                                        <div class="col-lg-6 " id="divbtnadd" style="   {% if list_couleur|length > 0 %}margin-top: 15px;padding-left: 0px {% else %} margin-top: -33px;  {% endif %} ">
                                            <button type="button" onclick="adddivcouleur()"
                                                    class="btn social-evernote waves-effect waves-classic">
                                                <i class="icon md-plus"></i> {{ "Ajouter une couleur"|trans }}
                                            </button>
                                        </div>

                                    </div>
                                    </div>
                                </div>

                                <br><br>
                                <div class="col-lg-12">
                                    <div class="row row-lg">
                                        <div class="col-lg-2 text-left">

                                        </div>
                                        <div class="col-lg-2 text-left">
                                        </div>

                                        <div class="col-lg-6 text-left">
                                            <div class="checkbox-custom checkbox-primary center-block">
                                                {{ form_widget(form.is_active, {'attr': {'class': 'form-control'}}) }}
                                                <label for="inputChecked">{{ "Est Active"|trans }}?</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <br><br>
                                {#
                                 <div class="col-lg-12 text-center">
                                    <button class="float-right btn md-edit social-evernote waves-effect waves-classic waves-effect waves-classic waves-effect waves-classic">{{ 'Enregistrer'|trans }}</button>
                                </div>
                                #}
                             <div class="col-lg-12 text-center">

                                <div class="row">
                                    <div class="col-lg-6 text-right">
                                        <button class="btn social-evernote  waves-effect waves-classic">{{ 'Enregistrer'|trans }}</button>
                                    </div>
                                    <div class="col-lg-6 text-left">
                                        <a href="{{ path('produit_gerant_index') }}" style=" background-color: #ed0000 !important;  border-color: #ed0000!important;"  class="btn   btn-danger waves-effect waves-classic">{{ 'back'|trans }}</a>
                                    </div>
                                </div>
                             </div>

                                {{ form_end(form) }}

                                <br>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>



{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('remark/global/js/Plugin/input-group-file.js')}}"></script>
    <script>

        if ($('#produit_is_promo').is(":checked"))
        {
            // it is checked
            $("#div_prix_promo").show()

        }else {
            $("#div_prix_promo").hide()

        }
    </script>

    <script>
        $("document").ready(function(){

            $('#produit_is_promo').change(function() {
                if(this.checked) {
                    $("#div_prix_promo").show()
                }else {
                    $("#div_prix_promo").hide()

                }
            });
            $('#radPromotionP').on("click",function(){
                //   console.log("promo_prix")

               // $('#produit_poucentage_promo').val('');
               // $('#produit_num_produit_promo').val('');

                $("#radPromotionP").prop("checked", true);
                $("#radPromotionPor").prop("checked", false);
                $('#titleeeone').find('a').trigger('click');


            })

            $('#radPromotionPor').on("click",function(){
                //  console.log("promo_pourcentage")

              //  $('#produit_prix_promo').val('');
                $("#radPromotionP").prop("checked", false);
                $("#radPromotionPor").prop("checked", true);
                $('#titleee').find('a').trigger('click');


            })

            if( $('#produit_poucentage_promo').val()){



                $('#titleee').find('a').trigger('click');


                //  $("#radPromotionPor").prop("checked", true);

            }else {
                //   $("#radPromotionP").prop("checked", true);
                $('#titleeeone').find('a').trigger('click');


            }

            $('#titleee a').click(function(evt) {
                evt.preventDefault();
                $("#radPromotionP").prop("checked", true);
                $("#radPromotionPor").prop("checked", false);


            });

            $('#titleeeone a').click(function(evt) {
                evt.preventDefault();
                $("#radPromotionP").prop("checked", false);
                $("#radPromotionPor").prop("checked", true);


            });
            /////////////
            $('#promo_prix').on("click",function(){

              //was  $('#produit_poucentage_promo').val('');
             //was   $('#produit_num_produit_promo').val('');

                $("#radPromotionP").prop("checked", true);
                $("#radPromotionPor").prop("checked", false);

            })

            $('#promo_pourcentage').on("click",function(){
             //was   $('#produit_prix_promo').val('');
                $("#radPromotionP").prop("checked", false);
                $("#radPromotionPor").prop("checked", true);

            })

            $("#produit_poucentage_promo").change(function(){
                //does some stuff;
                $('#produit_prix_promo').val('');
            });
            $("#produit_prix_promo").change(function(){
                //does some stuff;
                $('#produit_poucentage_promo').val('');
                $('#produit_num_produit_promo').val('');
            });

            if( $('#produit_poucentage_promo').val()){

                $('#titleee').find('a').trigger('click');

            }else {
                $('#titleeeone').find('a').trigger('click');


            }
        })

        $("select").select2();


        $("select[name='produit_categorie']").prop('disabled', true);
        $("select[name='produit_sous_categorie']").prop('disabled', true);

    </script>
    <script>
        function updatequantityofsize(id){
            var quantity = parseInt(  $("#quantityofsize"+id).val());
           // console.log(quantity)
            if(quantity> 0){
                $.ajax({
                    url: "{{ path('edit_size_gerant') }}",
                    dataType: 'Json',
                    data: {'id':id,'quantite':quantity},
                    type:'GET',
                    success: function(data) {
                        $("#quantityofsize"+id).val(quantity);
                        alert("la quantité est modifiée avec succes")
                    }
                });

            }
            else{
                alert("la quantité doit ètre >0")
            }
        }
        var couleur = -1;

        function adddivcouleur(){
            divinitial=document.getElementById('divbtnadd').style.marginTop = "15px";
            divinitial=document.getElementById('divbtnadd').style.paddingLeft = "0px";
            if (  parseInt( $("#couleur").val()) == "undefined" || isNaN(parseInt( $("#couleur").val()))) {
                couleur++
                console.log("couleurplus"+couleur);
            }else {
                couleur = parseInt( $("#couleur").val()) +  1;
                // console.log("couleparsint"+couleur);

            }
            //console.log(couleur)
            const div = document.createElement('div');
            div.className = 'row row-lg';
            div.style='padding-top: 10px';
            div.id='rowcouleur';
            div.innerHTML =
                '<div class="col-lg-12">'+
                '<div class="row row-lg">'+

                '<div class="col-lg-4 text-left"> ' +
                '<input type="color" class="form-control" name="couleurs[]"> ' +
                '<input type="text" class="form-control" name="couleur'+couleur+'" value="'+couleur+'" hidden>' +
                '</div>' +
                '<div class="col-lg-8 text-left"> ' +
                '<div class="input-group input-group-file" data-plugin="inputGroupFile" hidden> ' +
                '<input type="text" class="form-control" readonly=""> ' +
                '<span class="input-group-btn" hidden> ' +
                '<span class="btn btn-default btn-file waves-effect waves-classic"> ' +
                '<i class="icon md-upload" aria-hidden="true"></i> ' +
                '<input type="file"  accept="image/*" name="images[]"> ' +
                '</span> ' +
                '</span> ' +
                '</div> ' +
                '</div> ' +
                '<div class="col-lg-2 text-left"> </div>'+
                '</div> '+
                '</div> ' ;

            const divsize = document.createElement('div');

            divsize.className = 'row row-lg';
            divsize.style='padding-top: 10px';
            divsize.id='rowsize'+couleur;
            divsize.innerHTML =
                '<div class="col-lg-12">'+
                '<div class="row row-lg">'+
                '<div class="col-lg-4 text-right">' +
                '<input type="text" class="form-control" name="sizes'+couleur+'[]" placeholder="size">'+
                // '<select class="form-control" id="sizes" style="text-align-last: center" name="sizes'+couleur+'[]" > ' +
                //   '{% for key,size in produit.sizeValue %}'+
                //  ' <option value="{{ key }}"  >{{ size }}</option>'+
                //  '  {% endfor %}'+
                //   '  </select>'+
                '  </div>'+
                '  <div class="col-lg-8 text-left">'+
                '  <span class="input-group-btn">'+
                ' <input type="number" class="form-control" min="0" name="quantity'+couleur+'[]" value="0">'+
                '<button type="button" style="border-top-left-radius: 0;border-bottom-left-radius: 0;" onclick="adddivsize('+couleur+')" class="btn social-evernote waves-effect waves-classic">' +
                '<i class="icon md-plus"></i>' +
                '</button>'+
                '   </span>'+
                '  </div>'+
                '  <div class="col-lg-3 text-left">'+
                '   </div>'+
                '   </div>'+
                '   </div>';


            const divrow = document.createElement('div');
            divrow.className = 'row row-lg';
            divrow.style='padding-top: 10px';
            divrow.innerHTML =
                '<div class="col-lg-4 text-right"></div>' +
                '<div class="col-lg-6 text-right" style="border: 1px solid #dcdcdc;padding: 15px 15px 15px 15px;" >' +
                div.outerHTML+
                divsize.outerHTML+
                ' </div>';


            document.getElementById('divcouleur').appendChild(divrow);
            $("#couleur").val(couleur)
        }
        function adddivsize(i){
            var couleur = parseInt(  $("#couleur").val());
            console.log(couleur)
            const div = document.createElement('div');
            div.className = 'col-lg-12';
            div.style='padding-top: 10px';
            div.innerHTML =

                '<div class="row row-lg">'+
                '<div class="col-lg-4 text-right">' +
                '<input type="text" class="form-control" name="sizes'+i+'[]" placeholder="size">'+
                //    '<select class="form-control" id="sizes" style="text-align-last: center" name="sizes'+i+'[]" > ' +
                //    '{% for key,size in produit.sizeValue %}'+
                //   ' <option value="{{ key }}"  >{{ size }}</option>'+
                //   '  {% endfor %}'+
                //   '  </select>'+
                '  </div>'+
                '  <div class="col-lg-8 text-left">'+
                '  <span class="input-group-btn">'+
                ' <input type="number" min="0" class="form-control" name="quantity'+i+'[]" value="0">'+
                '   </span>'+
                '  </div>'+
                '  <div class="col-lg-3 text-left">'+
                '   </div>'+
                '   </div>';
            document.getElementById('rowsize'+i).appendChild(div);
        }

    </script>
{% endblock %}
